<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Follow Test</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<h1>Follow Test</h1>

<!-- follower id -->
<input class="form-control" id="authentication" th:value="${#authentication != null ? #authentication.name : null}" />
<input class="d-none" id="followerId" th:value="21"/>

<!-- Follow Button -->
<button id="followBtn" type="button" class="btn btn-dark d-none" onclick="follow()">
    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.0198 6.77894C8.94243 3.98296 3.5 4.39829 3.5 8.6267C3.5 10.6135 4.97427 13.2199 9.20416 15.9063C9.30036 15.9674 9.6265 16.1413 10 16.1427C10.3735 16.1442 10.6793 15.9801 10.7622 15.9276C15.0179 13.2337 16.5 10.6188 16.5 8.6267C16.5 4.42263 11.1031 3.96638 10.0198 6.77894Z" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
    </svg>
    팔로우 등록
</button>

<!-- Unfollow Button -->
<button id="unfollowBtn" type="button" class="btn btn-dark d-none" onclick="unfollow()">
    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.0198 6.77894C8.94243 3.98296 3.5 4.39829 3.5 8.6267C3.5 10.6135 4.97427 13.2199 9.20416 15.9063C9.30036 15.9674 9.6265 16.1413 10 16.1427C10.3735 16.1442 10.6793 15.9801 10.7622 15.9276C15.0179 13.2337 16.5 10.6188 16.5 8.6267C16.5 4.42263 11.1031 3.96638 10.0198 6.77894Z" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
    </svg>
    팔로우 취소
</button>


<div>
    <!-- Check if Model Attribute 1 is not null -->
    <p th:if="${one != null}"><span th:text="|${#authentication.name}의 팔로우 수: ${one}|"></span></p>
    <p th:unless="${one != null}">사용자의 팔로우 수: is null.</p>

    <!-- Check if Model Attribute 2 is not null -->
    <p th:if="${two != null}">USER_NO 21의 팔로워 수: <span th:text="${two}"></span></p>
    <p th:unless="${two != null}">USER_NO 21의 팔로워 수 is null.</p>
    
    <!-- Iterate over the list (Model Attribute 3) -->
    <p>사용자의 팔로우 한 사람들의 정보들 :</p>
    <ul th:if="${three != null}">
        <li th:each="follow : ${three}">
            <!-- Access properties of Follow object -->
            <span th:text="${follow.toUserNo}"></span>
        </li>
    </ul>
    <p th:unless="${three != null}">사용자의 팔로우 한 사람들의 정보들 is null.</p>

    <!-- Conditionally display content for Optional (Model Attribute 4) -->
    <p th:if="${four != null and four.isPresent()}">
        두 회원간 연결되어있는가: <span th:text="${four.get()}"></span>
    </p>
    <p th:unless="${four != null and four.isPresent()}">
        두 회원간 연결되어있는가 is empty or null.
    </p>
</div>


<script th:inline="javascript">
    var authentication = /*[[${#authentication.name}]]*/ null;
</script>
<script src="/js/follow.js"></script>
    
</body>
</html>